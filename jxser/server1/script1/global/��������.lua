Include("\\script\\activitysys\\g_activity.lua")
Include("\\script\\dailogsys\\g_dialog.lua")
Include("\\script\\activitysys\\playerfunlib.lua")

TB_JiangHuXingBaoDian = { 
[32] = { 
szTitleMsg = "<dec> ®· tr¶i qua nhiÒu nh­ vËy ®İch giang hå ©n o¸n , ng­¬i cã hay kh«ng ®· cã mét gióp ®ång cam céng khæ ho¹n n¹n ®İch huynh ®Ö tû muéi . ng­¬i cã hay kh«ng muèn mang dÉn bän hä thµnh lËp v¹n thÕ bÊt diÖt c«ng , c­íp lÊy b¶y ngän thµnh tr× ®İch quyÒn së h÷u , ®Ó cho bän hä cïng h­ëng thŞnh thÕ phån hoa . vËy th× thµnh lËp mét tù chóng ta ®İch bang héi ®em , phæ viÕt m×nh kho¸i ı ©n cõu # nhi n÷ t×nh tr­êng # c­íp thuyÒn # c­íp thµnh # c­íp BOSS~", 
tbOpt = { 
[1] = {"Thµnh lËp bang héi ", 33}, 
[2] = {"Bang héi b¶n ®å ", 34}, 
[3] = {"Tæ chøc kÕt cÊu ", 35}, 
[4] = {"Bang héi c¬ kim ", 36}, 
[5] = {"Bang héi hång lîi ", 37}, 
[6] = {"Bang héi liªn minh ", 38}, 
[7] = {"Bang héi chu môc tiªu ", 39}, 
[8] = {"Bang héi gi¶i t¸n ", 40} 
}, 
}, 
[33] = { szTitleMsg = "<dec> cã mét c¸i ®iÒu kiÖn sau , ng­¬i còng cã thÓ ®i Hoa S¬n (293.218) t×m kim s¬n ch­ëng m«n nh©n thµnh lËp m×nh bang héi liÔu #<enter>1. nhµ ch¬i kh«ng chç nµo chóc bang héi # m«n ph¸i # tøc mµu ®á tªn #<enter>2. cÊp bËc #50 cÊp <enter>3. danh väng trŞ gi¸ 450 trë lªn , danh väng cã thÓ th«ng qua lµm nhiÖm vô ®¹t ®­îc , bao gåm tay míi th«n nhiÖm vô <enter>4. thèng suÊt lùc 30 trë lªn <enter>5. tèng kim ®¹i chiÕn ®İch chiÕn lîi phÈm # nh¹c v­¬ng kiÕm # tèng kim tİch ph©n ë quan tiÕp liÖu chç ®æi lÊy nh¹c v­¬ng hån chi th¹ch , 100 c¸ nh¹c v­¬ng hån chi th¹ch ®æi lÊy 1 ®em nh¹c v­¬ng kiÕm # còng cã thÓ ë kú tr©n c¸c trùc tiÕp mua nh¹c v­¬ng kiÕm lÔ tói më ra lÊy ®­îc #<enter>6. kim tiÒn #100 v¹n l­îng ",tbOpt = {{"Trë vÒ th­îng mét tÇng ", 32},},}, 
[34] = { szTitleMsg = "<dec> ng­¬i cã thÓ ë c¸c ®¹i thµnh thŞ tÕ r­îu chç sö dông ®¹o cô “ ®ång xanh ®Ønh ” khai s¸ng mét tê ch©n chİnh thuéc vÒ m×nh ®İch ®éc lËp bang héi b¶n ®å # nh»m vµo trong trß ch¬i b¶y phong c¸ch kh¸c nhau ®İch thµnh phè , bang héi b¶n ®å còng sÏ cã ®iÒu bÊt ®ång . ",tbOpt = {{"Trë vÒ th­îng mét tÇng ", 32},},}, 
[35] = { szTitleMsg = "<dec> ng­¬i cã thÓ bæ nhiÖm nhiÒu nhÊt kh«ng v­ît qua 7 c¸ tr­ëng l·o , nhiÒu nhÊt kh«ng v­ît qua 56 c¸ ®éi tr­ëng . cho phĞp ®èi øng bÊt ®ång chøc vŞ nhiÒu nhÊt cã thÓ biªn tËp 65 c¸ danh hiÖu , mçi danh hiÖu chiÒu dµi kh«ng thÓ v­ît qua 4 c¸ ch÷ h¸n . ",tbOpt = {{"Trë vÒ th­îng mét tÇng ", 32},},}, 
[36] = { szTitleMsg = "<dec> bang héi c¬ kim lµ mét c«ng céng ®İch hÖ thèng , dïng cho cÊt gi÷ bang héi ®İch cïng chung t­ s¶n . ",tbOpt = {{"Trë vÒ th­îng mét tÇng ", 32},},}, 
[37] = { szTitleMsg = "<dec> ng­¬i cã thÓ th«ng qua hång lîi ®İch ph­¬ng thøc cho bang héi thµnh viªn ph©n ph¸t bé phËn bang héi c¬ kim # cã thÓ th«ng qua hång lîi ph¸t ra giíi mÆt chÕ ®Şnh cho tr­ëng l·o # ®éi tr­ëng cïng bang chóng ba cÊp bËc chia ra ph¸t ra ng¹ch ®é . ",tbOpt = {{"Trë vÒ th­îng mét tÇng ", 32},},}, 
[38] = { szTitleMsg = "<dec> ng­¬i cßn cã thÓ cïng nh÷ng kh¸c bang héi kÕt thµnh bang héi liªn minh . mçi liªn minh trung nhÊt ®Şnh ph¶i tån t¹i mét minh chñ bang héi , İt nhÊt tån t¹i mét thµnh viªn bang héi , nhiÒu nhÊt cã thÓ tån t¹i 7 c¸ thµnh viªn bang héi . ",tbOpt = {{"Trë vÒ th­îng mét tÇng ", 32},},}, 
[39] = { szTitleMsg = "<dec> tõ hÖ thèng ngÉu nhiªn ë tèng kim # d· tÈu # x«ng quan # long m¹ch nhiÖm vô chê hÖ thèng trung chän lùa mét . chØ cÇn bang héi cã thÓ hoµn thµnh nªn môc tiªu , bang héi thµnh viªn còng cã thÓ ®¹t ®­îc phong phó İch lîi # bang chñ cßn cã thÓ nhËn lÊy BOSS lÖnh bµi chê . ",tbOpt = {{"Trë vÒ th­îng mét tÇng ", 32},},}, 
[40] = { szTitleMsg = "<dec> khi ng­¬i ®İch bang héi nh©n sè İt víi 16 ng­êi thêi ®iÓm sÏ tiÕn vµo kh¶o nghiÖm kú nga , nÕu nh­ 3 ngµy bªn trong kh«ng cã ®¹t tíi 16 ng­êi trë lªn , bang héi sÏ gi¶i t¸n # nhí lÊy muèn ®oµn kÕt h¶o huynh ®Ö cña m×nh nga . ",tbOpt = {{"Trë vÒ th­îng mét tÇng ", 32},},}, 
}; 

function main() 
local nNpcIndex = GetLastDiagNpc(); 
local szNpcName = GetNpcName(nNpcIndex); 
local tbDailog = DailogClass:new(szNpcName) 
tbDailog.szTitleMsg = "<npc> VŞ thiÓu hiÖp kia muèn gia nhËp bang héi sao ? " 

G_ACTIVITY:OnMessage("ClickNpc", tbDailog) 

tbDailog:AddOptEntry("Xem tin tøc hç trî bang héi ", TongHelp); 
tbDailog:AddOptEntry("Më giao diÖn chiªu mé bang héi ", NeedOpenTongZhaoMu); 

tbDailog:Show() 
end 

function jianghuxing_showdiag(nidx, nbackidx) 
local tb_dailog = {}; 

if (not TB_JiangHuXingBaoDian[nidx].szTitleMsg) then 
print("Error!!There Is No Titlemsg!!"); 
return 
end 

tb_dailog[1] = TB_JiangHuXingBaoDian[nidx].szTitleMsg; 

if (TB_JiangHuXingBaoDian[nidx].tbOpt) then 
for nkey, szopp in TB_JiangHuXingBaoDian[nidx].tbOpt do 
tinsert(tb_dailog, format("%s/#jianghuxing_showdiag(%d)", szopp[1], szopp[2])); 
end 
end 

tinsert(tb_dailog,"KÕt thóc ®èi tho¹i /OnCancel"); 

CreateTaskSay(tb_dailog); 
end 

function OnCancel() 
end 

function NeedOpenTongZhaoMu() 
OpenTongZhaoMu() 
end 

function TongHelp() 
jianghuxing_showdiag(32) 
end 
